{% extends "layout.html" %}

{% block content %}

<div class="govuk-grid-row">
	<div class="govuk-grid-column-one-half-from-desktop">

	</div>
</div>
<div class="govuk-grid-row">
	<div class="govuk-grid-column">
		<h1 class="govuk-heading-xl">
			Draft - {{data.draftTravelAdvice.title}}
		</h1>
		<p>Last updated: {{data.draftTravelAdvice.updated_at | formatIsoDate}}</p>
		<div class="govuk-tabs" data-module="govuk-tabs">
			<h2 class="govuk-tabs__title">
				Contents
			</h2>
			<ul class="govuk-tabs__list">
				<li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
					<a class="govuk-tabs__tab" href="#sections">
						Sections
					</a>
				</li>
				<li class="govuk-tabs__list-item">
					<a class="govuk-tabs__tab" href="#versions">
						Versions
					</a>
				</li>
			</ul>
			<div class="govuk-tabs__panel" id="sections">
		<div class="govuk-accordion" data-module="govuk-accordion" id="accordion-default">
			<div class="govuk-accordion__section ">
				<div class="govuk-accordion__section-header">
					<h2 class="govuk-accordion__section-heading">
							<span class="govuk-accordion__section-button" id="accordion-default-heading-2">
							  Summary
							</span>
					</h2>
				</div>
				<div id="accordion-default-content-2" class="govuk-accordion__section-content"
					 aria-labelledby="accordion-default-heading-2">
					<textarea class="govuk-textarea" name="summary" rows="20">
						{{data.draftTravelAdvice.details.summary}}
					</textarea>
				</div>
			</div>
			{% for section in data.draftTravelAdvice.details.parts %}
			<div class="govuk-accordion__section ">
				<div class="govuk-accordion__section-header">
					<h2 class="govuk-accordion__section-heading">
							<span class="govuk-accordion__section-button" id="accordion-default-heading-2">
							  {{section.title}}
							</span>
					</h2>
				</div>
				<div id="accordion-default-content-2" class="govuk-accordion__section-content"
					 aria-labelledby="accordion-default-heading-2">
					<textarea class="govuk-textarea" name="{{section.slug}}" rows="20">
						{{section.body}}
					</textarea>
				</div>
			</div>
			{% endfor %}
		</div>
			</div>
			<div class="govuk-tabs__panel" id="versions">
				{% for version in data.draftTravelAdvice.details.change_history %}
				<p>Updated: {{version.public_timestamp | formatIsoDate}}</p>
				<p>{{version.note}}</p>
				<hr />
				{% endfor %}
			</div>
	</div>
</div>
<link rel="stylesheet" href="/public/javascripts/accessible-autocomplete.min.css" />
<script type="text/javascript" src="/public/javascripts/accessible-autocomplete.min.js"></script>
<script>
  accessibleAutocomplete.enhanceSelectElement({
    defaultValue: '',
    selectElement: document.querySelector('#travelAdviceDraftCountry'),
    showAllValues: true,
    displayMenu: 'overlay'
  })
  document.querySelector('.autocomplete__dropdown-arrow-down').addEventListener('click', function () {
    document.querySelector('#countryToAdd').click()
    document.querySelector('#countryToAdd').focus()
  })
</script>
{% endblock %}
